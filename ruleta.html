<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Juego de Ruleta</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }
    th {
      background-color: #333;
      color: white;
    }
    .red {
      background-color: red;
      color: white;
    }
    .black {
      background-color: black;
      color: white;
    }
    .repeated {
      background-color: lightblue;
    }
    input {
      padding: 5px;
      margin: 5px;
    }
    .form-container {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>Control de Juego de Ruleta</h1>

  <div class="form-container">
    <label for="numeroActual">Número Actual: </label>
    <input type="number" id="numeroActual" min="0" max="36" required>
    <button id="agregarBtn">Agregar</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Número Anterior</th>
        <th>Número Actual</th>
        <th>Número Siguiente</th>
        <th>Frecuencia</th>
        <th>Vecinos Izq</th>
        <th>Vecinos Der</th>
        <th>Existe</th>
      </tr>
    </thead>
    <tbody id="tablaRuleta">
      <!-- Las filas se agregarán aquí mediante JavaScript -->
    </tbody>
  </table>

  <script>
    // Lista de los vecinos según la ruleta europea
    const vecinos = {
      0: [32, 26],
      1: [20, 19],
      2: [25, 21],
      3: [15, 27],
      4: [2, 6],
      5: [10, 29],
      6: [4, 11],
      7: [29, 28],
      8: [23, 30],
      9: [22, 18],
      10: [5, 23],
      11: [6, 8],
      12: [00, 3],
      13: [24, 36],
      14: [31, 9],
      15: [3, 34],
      16: [33, 20],
      17: [34, 16],
      18: [9, 29],
      19: [1, 23],
      20: [5, 32],
      21: [2, 14],
      22: [18, 35],
      23: [8, 10],
      24: [13, 11],
      25: [2, 17],
      26: [0, 27],
      27: [3, 13],
      28: [7, 12],
      29: [5, 17],
      30: [8, 11],
      31: [14, 17],
      32: [0, 15],
      33: [16, 1],
      34: [17, 10],
      35: [22, 11],
      36: [13, 24],
    };

    let historial = [];

    // Función para determinar el color de un número
    function getColor(num) {
      const rojos = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
      return rojos.includes(num) ? 'red' : 'black';
    }

    // Función para agregar una fila a la tabla
    function agregarFila(numeroActual) {
      const numeroAnterior = historial.length > 0 ? historial[historial.length - 1].numeroActual : null;
      const numeroSiguiente = historial.length > 1 ? historial[historial.length - 2].numeroAnterior : null;
      const frecuencia = historial.filter(row => row.numeroActual === numeroActual).length + 1;
      const vecinosIzq = vecinos[numeroActual][0];
      const vecinosDer = vecinos[numeroActual][1];

      // Verificación de repetidos
      const repetido = historial.some(row => 
        (row.numeroAnterior === numeroActual || row.numeroActual === numeroSiguiente)
      ) ? 'repetido' : '';

      historial.push({ numeroAnterior, numeroActual, numeroSiguiente, vecinosIzq, vecinosDer });

      const row = document.createElement('tr');
      row.classList.add(repetido);

      // Celdas de la fila
      row.innerHTML = `
        <td class="${getColor(numeroAnterior)}">${numeroAnterior !== null ? numeroAnterior : 'null'}</td>
        <td class="${getColor(numeroActual)}">${numeroActual}</td>
        <td class="${getColor(numeroSiguiente)}">${numeroSiguiente !== null ? numeroSiguiente : ''}</td>
        <td>${frecuencia}</td>
        <td>${vecinosIzq}</td>
        <td>${vecinosDer}</td>
        <td>${repetido}</td>
      `;

      document.getElementById('tablaRuleta').appendChild(row);
    }

    // Función para manejar el formulario
    document.getElementById('agregarBtn').addEventListener('click', function() {
      const numeroActual = parseInt(document.getElementById('numeroActual').value);
      if (numeroActual >= 0 && numeroActual <= 36) {
        agregarFila(numeroActual);
        document.getElementById('numeroActual').value = ''; // Limpiar campo
      } else {
        alert("Por favor, ingresa un número válido entre 0 y 36.");
      }
    });
  </script>
</body>
</html>
